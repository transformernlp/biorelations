<!DOCTYPE html>
<html>
  <head> </head>
  <body style="background-color:rgb(245,245,245);">
    <br />

    <h2 style="text-align: center">Biomedical Relation Repository</h2>
    <hr width="50%" align='center'>
    <br /><br /><br />
    <form style="text-align: center">
      <label for="fname">Query entity : </label>
      <input type="text" id="query" name="query" />
      <button type="button" id="search_btn" onclick="get_rels()">
        Get Relations
      </button>
    </form>
    <br />
    <!-- <div class="heading">
      <h4 style="float: left">Caused By</h4>
      <h4 style="float: right">Treated By</h4>
    </div> -->
    <div id="main_div">
      <div style="width: 100%">
        <div id="cause_main" style="width: 50%; height: 100px; float: left">
          <div id="cause_div" style="margin-left: 50%"></div>
          <!-- <h4><u>Caused By : </u></h4> -->
        </div>
        <div id="treat_div" style="margin-left: 50%; height: 100px">
          <!-- <h4><u> Treated By : </u></h4> -->
        </div>
      </div>
    </div>



    <div style="margin-top: 10%;">
    <!--  Footer starts here -->
    <hr style="width:100%;">
    <h3>How it works? </h3>
    <p>Enter the Biomedical Entity in the search box above to view the possible <strong>'caused by'</strong> and <strong>'treated by'</strong> relations.</p>
    <!-- <h4>Additional Info : </h4>
    <p>The Biomedical Relation Repository contain 'caused by' and 'treated by' relations for various medical entities.</p> -->
    <h4>Note :</h4>
    <p>These relations are extracted from PubMed abstracts in an unsupervised way and haven't evaluated by domain experts. So if you find any discrepancies, feel free to raise an issue or give a feedback in the <a href="https://github.com/transformernlp/biorelations/issues">Github issues section</a>.</p>

    <!--  Footer ends here-->
  </div>
    <script>
      document
        .getElementById("query")
        .addEventListener("keypress", function (event) {
          if (event.keyCode == 13) {
            event.preventDefault();
            document.getElementById("search_btn").click();
          }
        });

      function loadJSON(callback) {
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open("GET", "./data/biorelation.json", true); // Replace 'my_data' with the path to your file
        xobj.onreadystatechange = function () {
          if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            callback(xobj.responseText);
          }
        };
        xobj.send(null);
      }

      function get_rels() {
        loadJSON(function (response) {
          var query = document.getElementById("query").value.toLowerCase();
          // Parse JSON string into object
          var actual_JSON = JSON.parse(response);
          var res = actual_JSON[query];
          if (!res) {
            document.getElementById("cause_div").innerHTML =
              '<p style="width:40%; float:left;">No cause relations found</p>';
            document.getElementById("treat_div").innerHTML =
              '<p style="width:40%; float:left;">No treat relations found</p>';
          }
          if (res["caused by"].length == 0) {
            document.getElementById("cause_div").innerHTML =
              '<p style="width:40%; float:left;">No cause relations found</p>';
          }
          if (res["treated by"].length == 0) {
            document.getElementById("treat_div").innerHTML =
              '<p style="width:40%; float:left;">No treat relations found</p>';
          }
          if (res["caused by"].length > 0) {
            var cause_rels = res["caused by"].slice(0, 10);
            document.getElementById("cause_div").innerHTML =
              "<strong><u>Caused By </u></strong><li>" +
              cause_rels.join("</li><li>");
            +"</li>";
          }
          if (res["treated by"].length > 0) {
            var treat_rels = res["treated by"].slice(0, 10);
            document.getElementById("treat_div").innerHTML =
              "<strong><u>Treated By</u></strong><li>" +
              treat_rels.join("</li><li>");
            +"</li>";
          }
        });
      }
    </script>
  </body>
</html>
